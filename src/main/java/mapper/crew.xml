<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.co.meetup.crew">
	<!-- 모든 모임 조회 -->
	<select id="selectAllCrew" resultType="CrewVO">
		SELECT c.crewNo, c.geoCode, c.categoryBigNo, c.categorySmallNo, crewName, crewIntro, crewContent, crewMax, crewAttend, crewStatus, crewOriginalImg, crewSaveImg, crewOriginalBanner, crewSaveBanner, crewDeadDate, c.createdAt, updatedAt, geoCity, geoDistrict, categoryBigName, categorySmallName
		FROM crew c, geo g , category_big cb, category_small cs
		WHERE c.geoCode = g.geoCode AND c.categoryBigNo = cb.categoryBigNo AND c.categorySmallNo = cs.categorySmallNo
	</select>
	
	<!-- 모든 대 카테고리 조회 -->
	<select id="selectAllCategoryBig" resultType="CategoryBigVO">
		SELECT categoryBigNo, categoryBigName, categoryBigIcon, createdAt
		FROM category_big
	</select>
	
	<!-- 모든 소 카테고리 조회 -->
	<select id="selectAllCategorySmall" resultType="CategorySmallVO">
		SELECT categorySmallNo, categoryBigNo, categorySmallName, createdAt
		FROM category_small
	</select>
	
	<!-- 모든 지역 조회 -->
	<select id="selectAllGeo" resultType="GeoVO">
		SELECT geoCode, geoCity, geoDistrict
		FROM geo
	</select>
	
	<!-- 한개 모임 등록 -->
	<insert id="addCrew" parameterType="CrewVO">
		INSERT INTO crew (geoCode, categoryBigNo, categorySmallNo, crewName, crewContent, crewMax, crewOriginalImg, crewSaveImg, crewOriginalBanner, crewSaveBanner)
		VALUES(#{geoCode}, #{categoryBigNo}, #{categorySmallNo}, #{crewName}, #{crewContent}, #{crewMax}, #{crewOriginalImg}, #{crewSaveImg}, #{crewOriginalBanner}, #{crewSaveBanner})
	</insert>
</mapper>