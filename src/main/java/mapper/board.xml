<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.co.meetup.web.board">
	
	<!-- 게시판 총 데이터 수 조회 -->
	<select id="selectTotalCountBoard" resultType="int">
		SELECT count(*) as cnt FROM board
	</select>
	
	<!-- 게시판 -전체 조회 -->
	<select id="selectAllBoard" parameterType="Hashmap"
		resultType="boardVO">
		SELECT rn, boardNo, crewNo, boardCategoryNo, memberNo, boardTitle, boardContent, boardStatus, createdAt, updatedAt
		FROM(SELECT ROWNUM rn, boardNo, crewNo, boardCategoryNo, memberNo, boardTitle, boardContent, boardStatus, createdAt, updatedAt
		FROM (SELECT rn, boardNo, crewNo, boardCategoryNo, memberNo, boardTitle, boardContent, boardStatus, createdAt, updatedAt
		FROM board
		ORDER BY boardNo desc)
		WHERE ROWNUM &lt;= #{boardEndNo})
		WHERE RN &gt;= #{boardStartNo}
	</select>
	
	<!-- 게시판 - 1건 조회 -->
	<select id="selectOneBoard" parameterType="int" resultType="boardVO">
		SELECT rn, boardNo, crewNo, boardCategoryNo, memberNo, boardTitle, boardContent, boardStatus, createdAt, updatedAt
		FROM board
		WHERE boardNo
		= #{boardNo}
	</select>
	
	<!-- 게시판 - 게시글 작성 -->
	<insert id="addOneBoard" parameterType="boardVO">
		INSERT INTO board(crewNo, memberNo, boardCategoryNo, boardTitle, boardContent )
		VALUES(#{crewNo}, #{memberNo}, #{boardCategoryNo}, #{boardTitle}, #{boardContent} )
	</insert>
	
	<!-- 게시판 - 1건 게시물 수정 -->
	<update id="updateOneBoard" parameterType="boardVO">
	    UPDATE board
	    SET boardCategoryNo = #{boardCategoryNo},
	        boardTitle = #{boardTitle},
	        boardContent = #{boardContent}
	    WHERE boardNo = #{boardNo}
	</update>
	
	<!-- 게시판 - 1건 게시물 삭제 -->
	<delete id="deleteOneBoard" parameterType="int">
		DELETE FROM board
		WHERE boardNo = #{boardNo}
	</delete>
	
	<!-- 게시판- 조회수 1 증가 -->
	<update id="raiseHitBoard" parameterType="int">
		UPDATE board
		SET boardHit = boardHit + 1
		WHERE boardNo = #{boardNo}
	</update>
	
</mapper>